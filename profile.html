<!doctype html>
<html lang="ku" dir="rtl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>پڕۆفایل - دروستکردنی ئەکاونت</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins&display=swap');
    :root {
      --card-bg: rgba(20, 20, 20, 0.8);
      --accent: #66fcf1;
      --accent-shadow: #45a29e;
      --muted: #8081ce;
      --text-primary: #c5c6c7;
      --input-bg: #121417;
      --input-border: #45a29e;
      --background: #0b0c10;
    }
    * {
      box-sizing: border-box;
    }
    body {
      font-family: 'Poppins', sans-serif, "Noto Sans", "Helvetica", Arial, sans-serif;
      background: var(--background);
      padding: 32px;
      color: var(--muted);
      direction: rtl;
      margin: 0;
    }
    .container {
      max-width: 900px;
      margin: 0 auto;
    }
    .card {
      background: var(--card-bg);
      border-radius: 12px;
      padding: 22px;
      box-shadow: 0 6px 20px rgba(102, 252, 241, 0.3);
      color: var(--text-primary);
    }
    .header {
      display: flex;
      align-items: center;
      gap: 16px;
    }
    .avatar {
      width: 110px;
      height: 110px;
      border-radius: 18px;
      overflow: hidden;
      flex: 0 0 110px;
      background: #1c1f26;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 0 10px var(--accent);
    }
    .avatar img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    h1 {
      font-size: 20px;
      margin: 0;
      color: var(--accent);
    }
    p.lead {
      margin: 4px 0 0;
      color: var(--muted);
    }
    form {
      margin-top: 18px;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
    }
    label {
      display: block;
      font-size: 13px;
      margin-bottom: 6px;
      color: var(--text-primary);
    }
    input[type="text"],
    input[type="email"],
    textarea,
    select {
      width: 100%;
      padding: 10px;
      border-radius: 8px;
      border: 1px solid var(--input-border);
      font-size: 14px;
      background-color: var(--input-bg);
      color: var(--text-primary);
    }
    textarea {
      min-height: 120px;
      resize: vertical;
    }
    .full {
      grid-column: 1/-1;
    }
    .actions {
      display: flex;
      gap: 8px;
      justify-content: flex-end;
      margin-top: 14px;
    }
    button {
      padding: 10px 14px;
      border-radius: 10px;
      border: 0;
      font-weight: 600;
      cursor: pointer;
      color: var(--background);
      transition: background 0.3s ease;
    }
    .btn-primary {
      background: var(--accent);
    }
    .btn-primary:hover {
      background: var(--accent-shadow);
    }
    .btn-secondary {
      background: #121417;
      color: var(--accent);
      border: 1px solid var(--accent);
    }
    .btn-secondary:hover {
      background: var(--accent);
      color: var(--background);
    }
    .profile-preview {
      margin-top: 22px;
      display: grid;
      grid-template-columns: 1fr 2fr;
      gap: 16px;
    }
    .profile-card {
      padding: 14px;
      border-radius: 10px;
      border: 1px dashed var(--accent-shadow);
      background: rgba(10, 12, 15, 0.6);
      color: var(--text-primary);
    }
    .kv {
      display: flex;
      justify-content: space-between;
      padding: 8px 0;
      border-bottom: 1px solid rgba(102, 252, 241, 0.2);
    }
    .kv:last-child {
      border-bottom: 0;
    }
    .small {
      font-size: 13px;
      color: var(--muted);
    }
    @media (max-width: 700px) {
      form {
        grid-template-columns: 1fr;
      }
      .profile-preview {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="card">
      <div class="header">
        <div class="avatar" id="avatarPreview"><span class="small">وێنە</span></div>
        <div style="flex:1">
          <h1 id="displayName">ناوی ئەکاونت</h1>
          <p class="lead small" id="displayBio">بۆ پاراستنی پڕۆفایل، دەگۆڕێت لەخوێندن.</p>
        </div>
        <div style="margin-left:8px;text-align:left">
          <button id="editBtn" class="btn-primary">دەستکاری</button>
        </div>
      </div>

      <form id="profileForm" style="display:none">
        <div>
          <label for="name">ناو</label>
          <input id="name" type="text" placeholder="ناوت بنووسە">
        </div>
        <div>
          <label for="username">ناوی بەکارهێنەر</label>
          <input id="username" type="text" placeholder="@username">
        </div>
        <div>
          <label for="email">ئیمەیڵ</label>
          <input id="email" type="email" placeholder="name@example.com">
        </div>
        <div>
          <label for="language">زمان</label>
          <select id="language">
            <option value="ku">کوردی (سۆرانی)</option>
            <option value="en">English</option>
          </select>
        </div>

        <div class="full">
          <label for="bio">پێناسە (بایۆ)</label>
          <textarea id="bio" placeholder="کورت پێناسەی خۆت لێرە بنووسە"></textarea>
        </div>

        <div>
          <label for="avatarInput">وێنەی پڕۆفایل</label>
          <input id="avatarInput" type="file" accept="image/*">
        </div>

        <div id="cropperContainer" style="display:none; margin-top:10px;" class="full">
          <img id="cropperImage" style="max-width:100%;">
        </div>

        <div class="full actions">
          <button type="button" id="saveBtn" class="btn-primary">پاشەکەوت</button>
          <button type="button" id="cancelBtn" class="btn-secondary">هەڵبگڕێنەوە</button>
        </div>
      </form>

      <div class="profile-preview">
        <div class="profile-card">
          <div class="kv"><div class="small">ناو</div><div id="pvName">-</div></div>
          <div class="kv"><div class="small">ناوی بەکارهێنەر</div><div id="pvUsername">-</div></div>
          <div class="kv"><div class="small">ئیمەیڵ</div><div id="pvEmail">-</div></div>
          <div class="kv"><div class="small">زمان</div><div id="pvLang">-</div></div>
          <div class="kv"><div class="small">پێناسە</div><div id="pvBio">-</div></div>
        </div>
        <div class="profile-card" style="display:flex;flex-direction:column;align-items:center;justify-content:center">
          <div class="avatar" style="width:160px;height:160px;border-radius:12px;overflow:hidden;margin-bottom:12px" id="pvAvatar"><span class="small">وێنە</span></div>
          <div class="small">پێشنیار: ئەو زانیاریانە دەتوانن لە لوکاڵ ستیۆڕ (LocalStorage) پاشەکەوت بکرێن</div>
        </div>
      </div>

    </div>
  </div>

  <script>
    // Elements
    let cropper;
    const cropperImage = document.getElementById('cropperImage');
    const cropperContainer = document.getElementById('cropperContainer');

    const editBtn = document.getElementById('editBtn');
    const profileForm = document.getElementById('profileForm');
    const saveBtn = document.getElementById('saveBtn');
    const cancelBtn = document.getElementById('cancelBtn');

    const nameEl = document.getElementById('name');
    const usernameEl = document.getElementById('username');
    const emailEl = document.getElementById('email');
    const bioEl = document.getElementById('bio');
    const langEl = document.getElementById('language');
    const avatarInput = document.getElementById('avatarInput');

    const displayName = document.getElementById('displayName');
    const displayBio = document.getElementById('displayBio');
    const avatarPreview = document.getElementById('avatarPreview');

    const pvName = document.getElementById('pvName');
    const pvUsername = document.getElementById('pvUsername');
    const pvEmail = document.getElementById('pvEmail');
    const pvLang = document.getElementById('pvLang');
    const pvBio = document.getElementById('pvBio');
    const pvAvatar = document.getElementById('pvAvatar');

    // Load from localStorage
    function loadProfile(){
      const data = JSON.parse(localStorage.getItem('soraniProfile')||'{}');
      nameEl.value = data.name||'';
      usernameEl.value = data.username||'';
      emailEl.value = data.email||'';
      bioEl.value = data.bio||'';
      langEl.value = data.lang||'ku';

      displayName.textContent = data.name || 'ناوی ئەکاونت';
      displayBio.textContent = data.bio || 'پێناسەی کورت لە پڕۆفایل';

      pvName.textContent = data.name || '-';
      pvUsername.textContent = data.username ? ('@'+data.username) : '-';
      pvEmail.textContent = data.email || '-';
      pvLang.textContent = data.lang === 'ku' ? 'کوردی (سۆرانی)' : 'English';
      pvBio.textContent = data.bio || '-';

      if(data.avatar){
        avatarPreview.innerHTML = '<img src="'+data.avatar+'" alt="avatar">';
        pvAvatar.innerHTML = '<img src="'+data.avatar+'" alt="avatar">';
      } else {
        avatarPreview.innerHTML = '<span class="small">وێنە</span>';
        pvAvatar.innerHTML = '<span class="small">وێنە</span>';
      }
    }

    // Toggle edit mode
    editBtn.addEventListener('click', ()=>{
      profileForm.style.display = profileForm.style.display === 'none' ? 'grid' : 'none';
      if(profileForm.style.display === 'grid') editBtn.textContent = 'خاڵەکان بخەرەوە'; else editBtn.textContent = 'دەستکاری';
    });

    // Avatar preview
    avatarInput.addEventListener('change', (e)=>{
      const f = e.target.files[0];
      if(!f) return;
      const reader = new FileReader();
      reader.onload = function(ev){
        const src = ev.target.result;
        cropperImage.src = src;
        cropperContainer.style.display = 'block';
        if(cropper) cropper.destroy();
        cropper = new Cropper(cropperImage, {
          aspectRatio: 1,
          viewMode: 1,
          responsive: true,
          autoCropArea: 1,
          crop: function(event) {
            // Update preview with cropped image
            const canvas = cropper.getCroppedCanvas();
            const croppedSrc = canvas.toDataURL();
            avatarPreview.innerHTML = '<img src="'+croppedSrc+'" alt="avatar">';
            pvAvatar.innerHTML = '<img src="'+croppedSrc+'" alt="avatar">';
          }
        });
      }
      reader.readAsDataURL(f);
    });

    // Save
    saveBtn.addEventListener('click', ()=>{
      const profile = {
        name: nameEl.value.trim(),
        username: usernameEl.value.trim(),
        email: emailEl.value.trim(),
        bio: bioEl.value.trim(),
        lang: langEl.value
      };

      // If user selected an image, try to get data URL from preview
      const img = avatarPreview.querySelector('img');
      if(img) profile.avatar = img.src;

      localStorage.setItem('soraniProfile', JSON.stringify(profile));
      loadProfile();
      profileForm.style.display = 'none';
      editBtn.textContent = 'دەستکاری';
      alert('زانیاریەکان پاشەکەوت کران');
    });

    cancelBtn.addEventListener('click', ()=>{
      loadProfile();
      profileForm.style.display = 'none';
      editBtn.textContent = 'دەستکاری';
      cropperContainer.style.display = 'none';
      if(cropper) cropper.destroy();
    });

    // Initialize
    loadProfile();
  </script>
  
  const logoutBtn = document.getElementById('logoutBtn');

logoutBtn.addEventListener('click', () => {
  // Remove user data
  localStorage.removeItem('soraniProfile');

  // Optional: show notification
  showBuyNotification("You have logged out successfully!");

  // Optional: redirect to login page after 1 second
  setTimeout(() => {
    window.location.href = "SingIn.html"; // change to your login page
  }, 1000);
});

  
  <a href="profile.html" id="profileDisplay">
  <div id="profileAvatar"></div>
  <span id="profileName">Profile</span>
</a>
<button id="logoutBtn">Logout</button>
</body>
</html>
